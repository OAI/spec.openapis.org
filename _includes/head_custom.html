<meta name="color-scheme" content="light dark">
<script>
// Prevent flickering by applying theme before page renders
// This must run before other scripts load
(function() {
	const storedTheme = localStorage.getItem('theme');
	if (storedTheme === 'dark') {
		document.documentElement.setAttribute('data-color-scheme', 'dark');
	}
})();
</script>
<script type="module">
const darkThemeName = "dark";
const lightThemeName = "light";
/**
 * Sets the theme based on the media query match info.
 * @param {MediaQueryListEvent|MediaQueryList} info - The media query match info. 
 */
function setThemeFromMatch(info)
{
	if (!window.jtd || !info)
		return;
	const currentTheme = jtd.getTheme();
	if ((info.matches && currentTheme === darkThemeName) || (!info.matches && currentTheme === lightThemeName))
		return;
	jtd.setTheme(info.matches ? darkThemeName : lightThemeName);
}
const mediaQuery = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
if (mediaQuery)
{
	setThemeFromMatch(mediaQuery);
	mediaQuery.addEventListener('change', event => {
		setThemeFromMatch(event);
	});
}
</script>